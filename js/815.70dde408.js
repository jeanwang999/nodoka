"use strict";(self["webpackChunkww_web"]=self["webpackChunkww_web"]||[]).push([[815],{9815:function(t,e,s){s.r(e),s.d(e,{default:function(){return z}});var i=s(3396),a=s(7139),o=s(9242);const c={class:"blog py-5"},r={class:"container"},l={class:"row mt-4"},d={class:"col-md-2"},n={class:"mt-5 category-item"},u=["onClick"],h={class:"col-md-10"},g={class:"d-flex flex-wrap justify-content-between align-items-center mt-5 mb-3"},p={key:0,class:"text-uppercase"},m={key:1,class:"text-uppercase"},w=(0,i._)("a",{href:"index.html",class:"btn-link"},"View All",-1),f={class:"row"},_={class:"product-item image-zoom-effect link-effect"},y={class:"image-holder"},v=["onClick"],C=["src"],k=(0,i._)("a",{href:"",class:"btn-icon btn-wishlist"},[(0,i._)("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},[(0,i._)("use",{"xlink:href":"#heart"})])],-1),x={class:"product-content"},P={class:"text-uppercase fs-5 mt-3"},$=["onClick"],b=["disabled","onClick"];function N(t,e,s,N,L,D){const I=(0,i.up)("LoadingCp");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(I,{active:t.isLoading},null,8,["active"]),(0,i._)("section",c,[(0,i._)("div",r,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",n,[(0,i._)("a",{href:"#",class:(0,a.C_)(["list-group-item list-group-item-action",{active:""===L.categoryName}]),onClick:e[0]||(e[0]=(0,o.iM)((t=>L.categoryName=""),["prevent"]))},"全部商品",2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.filterCategory,((t,e)=>((0,i.wg)(),(0,i.iD)("a",{key:e,href:"#",class:(0,a.C_)(["list-group-item list-group-item-action",{active:L.categoryName===t}]),onClick:(0,o.iM)((e=>L.categoryName=t),["prevent"])},(0,a.zw)(t),11,u)))),128))])]),(0,i._)("div",h,[(0,i._)("div",g,[""===L.categoryName?((0,i.wg)(),(0,i.iD)("h4",p,"全部商品")):((0,i.wg)(),(0,i.iD)("h4",m,(0,a.zw)(L.categoryName),1)),w]),(0,i._)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.filterProduct,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"col-md-4",key:t.id},[(0,i._)("div",_,[(0,i._)("div",y,[(0,i._)("a",{onClick:e=>D.getProduct(t.id)},[(0,i._)("img",{src:`${t.imageUrl}`,alt:"categories",class:"product-image img-fluid"},null,8,C)],8,v),k,(0,i._)("div",x,[(0,i._)("h5",P,[(0,i._)("a",{onClick:e=>D.getProduct(t.id)},(0,a.zw)(t.title),9,$)]),(0,i._)("a",{class:"text-decoration-none","data-after":"加入購物車",disabled:this.status.loadingItem===L.product.id,onClick:e=>D.addCart(t.id)},[(0,i._)("span",null,"$"+(0,a.zw)(t.price),1)],8,b)])])])])))),128))])])])])])],64)}s(7658);var L={props:["category"],data(){return{products:[],product:{},cart:{},coupon_code:"",status:{loadingItem:""},categoryName:"",allProducts:[]}},methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/ww-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.products=t.data.products,console.log("products:",t),this.isLoading=!1}))},getProduct(t){this.$router.push(`/product/${t}`)},getAllProducts(){const t="https://vue3-course-api.hexschool.io/api/ww-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{this.allProducts=t.data.products,console.log("products:",t),this.isLoading=!1,console.log("取得全部商品for分類"),console.log("✅ filterCategory:",this.filterCategory)}))},addCart(t){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/ww-api/cart";this.status.loadingItem=t;const s={product_id:t,qty:1};this.$http.post(e,{data:s}).then((t=>{this.status.loadingItem="",console.log(t),this.$httpMessageState(t,"加入購物車"),this.getCart(),this.isLoading=!1,this.$emit("update-cart")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/ww-api/cart";this.$http.get(t).then((t=>{console.log(t),this.cart=t.data.data}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/ww-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{console.log(t),this.status.loadingItem="",this.getCart()}))}},computed:{filterCategory(){return this.allProducts.map((t=>t.category)).filter(((t,e,s)=>s.indexOf(t)===e))},filterProduct(){return""===this.categoryName?this.products:this.allProducts.filter((t=>t.category===this.categoryName))}},created(){this.categoryName=this.$route.query.category||"",this.getProducts(),this.getAllProducts(),this.getCart()}},D=s(89);const I=(0,D.Z)(L,[["render",N]]);var z=I}}]);
//# sourceMappingURL=815.70dde408.js.map