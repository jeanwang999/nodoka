{"version":3,"file":"js/432.9a89398b.js","mappings":"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","sources":["webpack://ww_web/./src/views/user/UserCart.vue","webpack://ww_web/./src/views/user/UserCart.vue?c316"],"sourcesContent":["<template>\n    <LoadingCp :active=\"isLoading\"></LoadingCp>\n    <div class=\"container \">\n      <div class=\"row my-5 justify-content-center\">\n        <!-- 購物車列表 -->\n        <div class=\"col-md-8\">\n        <div class=\"sticky-top\">\n          <b>>>請確認購物車</b>\n          <table class=\"table align-middle\">\n            <thead>\n              <tr>\n                <th></th>\n                <th>品名</th>\n                <th style=\"width: 110px\">數量</th>\n                <th>單價</th>\n                <th>刪除</th>\n              </tr>\n            </thead>\n            <tbody>\n            <template v-if=\"cart.carts\">\n              <tr v-for=\"item in cart.carts\" :key=\"item.id\" >\n                <td>\n                  <a @click=\"getProduct(item.product.id)\">\n                    <img :src=\"`${item.product.imageUrl}`\" alt=\"\" style=\"height: 100px;\">\n                  </a>\n                </td>\n                <td>\n                  {{ item.product.title }}\n                  <div class=\"text-success\" v-if=\"item.coupon\">\n                    已套用優惠券{{ item.coupon.percent }}折\n                  </div>\n                </td>\n                <td>\n                  <div class=\"input-group input-group-sm\">\n                    <input type=\"number\" class=\"form-control\"\n                    :disabled=\"item.id === status.loadingItem\"\n                    @change=\"updateCart(item)\"\n                          v-model.number=\"item.qty\" min=\"1\">\n                    <div class=\"input-group-text\">/ {{ item.product.unit }}</div>\n                  </div>\n                </td>\n                <td class=\"text-end\">\n                  <small v-if=\"cart.final_total !== cart.total\">\n                    原價 {{ $filters.currency(item.total) }} <br>\n                  </small>\n                  <small v-if=\"cart.final_total !== cart.total\" class=\"text-success\">折扣價：</small>\n                  {{ $filters.currency(item.final_total) }}\n                </td>\n                <td>\n                  <button type=\"button\" class=\"btn btn-outline-danger btn-sm\"\n                          :disabled=\"status.loadingItem === item.id\"\n                          @click=\"removeCartItem(item.id)\">\n                    <i class=\"bi bi-x\"></i>\n                  </button>\n                </td>\n              </tr>\n            </template>\n            </tbody>\n            <tfoot>\n            <tr>\n              <td colspan=\"3\" class=\"text-end\">總計</td>\n              <td class=\"text-end\">{{ $filters.currency(cart.total) }}</td>\n            </tr>\n            <tr v-if=\"cart.final_total !== cart.total\">\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\n              <td class=\"text-end text-success\">{{ $filters.currency(cart.final_total) }}</td>\n            </tr>\n            </tfoot>\n          </table>\n          <div class=\"input-group mb-3 input-group-sm\">\n            <input type=\"text\" class=\"form-control\" v-model=\"coupon_code\" placeholder=\"請輸入優惠碼\">\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">\n                套用優惠碼\n              </button>\n            </div>\n          </div>\n        </div>\n        </div>\n\n      </div>\n      <div class=\"row my-5 justify-content-center\">\n        <!-- form 表單 -->\n        <FormCp class=\"col-md-8 my-6\" v-slot=\"{ errors }\"\n              @submit=\"createOrder\">\n          <b>>> 請輸入收件資料</b>\n          <br><br>\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <FieldCp id=\"email\" name=\"email\" type=\"email\" class=\"form-control\"\n                    :class=\"{ 'is-invalid': errors['email'] }\"\n                    placeholder=\"請輸入 Email\" rules=\"email|required\"\n                    v-model=\"form.user.email\"></FieldCp>\n            <ErrorMessage name=\"email\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">收件人姓名</label>\n            <FieldCp id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\n                    :class=\"{ 'is-invalid': errors['姓名'] }\"\n                    placeholder=\"請輸入姓名\" rules=\"required\"\n                    v-model=\"form.user.name\"></FieldCp>\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">收件人電話</label>\n            <FieldCp id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\n                    :class=\"{ 'is-invalid': errors['電話'] }\"\n                    placeholder=\"請輸入電話\" rules=\"required\"\n                    v-model=\"form.user.tel\"></FieldCp>\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">收件人地址</label>\n            <FieldCp id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\n                    :class=\"{ 'is-invalid': errors['地址'] }\"\n                    placeholder=\"請輸入地址\" rules=\"required\"\n                    v-model=\"form.user.address\"></FieldCp>\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea name=\"\" id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\"\n                      v-model=\"form.message\"></textarea>\n          </div>\n          <div class=\"text-center\">\n            <button class=\"btn btn-dark\" @click=\"createOrder(0)\">送出訂單</button>\n          </div>\n        </FormCp>\n\n      </div>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      cart: {},\n      coupon_code: '',\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      orderId: '',\n    };\n  },\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log('products:', response);\n        this.isLoading = false;\n      });\n    },\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id; // 當它等於id  btn addcart disable\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.status.loadingItem = ''; // ajax載入之後 再把id清空\n          console.log(res);\n          this.$httpMessageState(res, '加入購物車');\n          this.getCart();\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        console.log(response);\n        this.cart = response.data.data;\n        this.isLoading = false;\n        this.$emit('update-cart');\n      });\n    },\n    // 數量改變時 更新cart\n    updateCart(item) {\n      // console.log(item);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id; // 當它等於id  btn addcart disable\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '移除購物車品項');\n        this.status.loadingItem = '';\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          console.log(res);\n          this.$httpMessageState(res, '加入優惠券');\n          this.getCart();\n        });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order })\n        .then((res) => {\n          console.log(res);\n          this.$httpMessageState(res, '新增訂單');\n          // eslint-disable-next-line prefer-destructuring\n          const orderId = res.data.orderId;\n          console.log(orderId);\n          // 假设这里是你返回的 orderId\n          const checkoutRoute = { name: 'checkout', params: { orderId } };\n          // 要使用指定路由名稱 (物件搭配 name 屬性 )進行頁面跳轉，在路由表也需要定義 name 屬性才可以正確配對。\n\n          this.$router.push(checkoutRoute);\n        });\n    },\n  },\n  created() {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=24b6a73f\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_19","colspan","for","_createVNode","_component_LoadingCp","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","$data","cart","carts","_createElementBlock","_Fragment","key","_renderList","item","id","onClick","$event","$options","getProduct","product","src","imageUrl","alt","title","coupon","_hoisted_10","_toDisplayString","percent","_hoisted_11","type","disabled","status","loadingItem","onChange","updateCart","qty","min","_hoisted_13","unit","_hoisted_14","final_total","total","_hoisted_15","$filters","currency","_hoisted_16","_hoisted_17","removeCartItem","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","coupon_code","placeholder","_hoisted_27","_cache","args","addCouponCode","_hoisted_28","_component_FormCp","onSubmit","createOrder","errors","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_component_FieldCp","name","_normalizeClass","rules","form","user","email","_component_ErrorMessage","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","tel","_hoisted_38","_hoisted_39","address","_hoisted_40","_hoisted_41","cols","rows","message","_hoisted_42","data","products","orderId","methods","getProducts","url","this","$http","get","then","response","console","log","$router","push","addCart","product_id","post","res","$httpMessageState","getCart","$emit","put","delete","code","order","checkoutRoute","params","created","__exports__","render"],"sourceRoot":""}