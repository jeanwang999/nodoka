{"version":3,"file":"js/411.172443c6.js","mappings":"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","sources":["webpack://ww_web/./src/views/UserProducts.vue","webpack://ww_web/./src/views/UserProducts.vue?d35d"],"sourcesContent":["<template>\n    <LoadingCp :active=\"isLoading\"></LoadingCp>\n    <div class=\"container\">\n      <div class=\"row mt-4\">\n        <!-- 產品列表 -->\n        <div class=\"col-md-8\">\n          <table class=\"table align-middle\">\n            <thead>\n            <tr>\n              <th>圖片</th>\n              <th>商品名稱</th>\n              <th>價格</th>\n              <th></th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr v-for=\"item in products\" :key=\"item.id\">\n              <td style=\"width: 200px\">\n                <div style=\"height: 100px; background-size: cover; background-position: center\"\n                    :style=\"{backgroundImage: `url(${item.imageUrl})`}\"></div>\n              </td>\n              <td><a href=\"#\" class=\"text-dark\">{{ item.title }}</a></td>\n              <td>\n                <div class=\"h5\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\n                <del class=\"h6\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\n                <div class=\"h5\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\n              </td>\n              <td>\n                <div class=\"btn-group btn-group-sm\">\n                  <button type=\"button\" class=\"btn btn-outline-secondary\"\n                          @click=\"getProduct(item.id)\">\n                    查看更多\n                  </button>\n                  <button type=\"button\" class=\"btn btn-outline-danger\"\n                  :disabled=\"this.status.loadingItem === item.id\"\n                        @click=\"addCart(item.id)\">\n                  <div v-if=\"this.status.loadingItem === item.id\"\n                      class=\"spinner-grow text-danger spinner-grow-sm\" role=\"status\">\n                    <span class=\"visually-hidden\">Loading...</span>\n                  </div>\n                    加到購物車\n                  </button>\n                </div>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      products: [],\n      product: {},\n      cart: {},\n      coupon_code: '',\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      orderId: '',\n    };\n  },\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        this.products = response.data.products;\n        console.log('products:', response);\n        this.isLoading = false;\n      });\n    },\n    getProduct(id) {\n      this.$router.push(`/product/${id}`);\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.status.loadingItem = id; // 當它等於id  btn addcart disable\n      const cart = {\n        product_id: id,\n        qty: 1,\n      };\n      this.$http.post(url, { data: cart })\n        .then((res) => {\n          this.status.loadingItem = ''; // ajax載入之後 再把id清空\n          console.log(res);\n          this.$httpMessageState(res, '加入購物車');\n          this.getCart();\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.isLoading = true;\n      this.$http.get(url).then((response) => {\n        console.log(response);\n        this.cart = response.data.data;\n        this.isLoading = false;\n      });\n    },\n    updateCart(item) {\n      // console.log(item);\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.isLoading = true;\n      this.status.loadingItem = item.id; // 當它等於id  btn addcart disable\n      const cart = {\n        product_id: item.product_id,\n        qty: item.qty,\n      };\n      this.$http.put(url, { data: cart }).then((res) => {\n        console.log(res);\n        this.status.loadingItem = '';\n        this.getCart();\n      });\n    },\n    removeCartItem(id) {\n      this.status.loadingItem = id;\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\n      this.isLoading = true;\n      this.$http.delete(url).then((response) => {\n        this.$httpMessageState(response, '移除購物車品項');\n        this.status.loadingItem = '';\n        this.getCart();\n        this.isLoading = false;\n      });\n    },\n    addCouponCode() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.isLoading = true;\n      this.$http.post(url, { data: coupon })\n        .then((res) => {\n          console.log(res);\n          this.$httpMessageState(res, '加入優惠券');\n          this.getCart();\n        });\n    },\n    createOrder() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(url, { data: order })\n        .then((res) => {\n          console.log(res);\n          this.$httpMessageState(res, '新增訂單');\n          // eslint-disable-next-line prefer-destructuring\n          const orderId = res.data.orderId;\n          console.log(orderId);\n          // 假设这里是你返回的 orderId\n          const checkoutRoute = { name: 'checkout', params: { orderId } };\n          // 要使用指定路由名稱 (物件搭配 name 屬性 )進行頁面跳轉，在路由表也需要定義 name 屬性才可以正確配對。\n\n          this.$router.push(checkoutRoute);\n        });\n    },\n  },\n  created() {\n    this.getProducts();\n    this.getCart();\n  },\n};\n</script>\n","import { render } from \"./UserProducts.vue?vue&type=template&id=80186a48\"\nimport script from \"./UserProducts.vue?vue&type=script&lang=js\"\nexport * from \"./UserProducts.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","href","role","_hoisted_15","_createVNode","_component_LoadingCp","active","_ctx","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementBlock","_Fragment","_renderList","$data","products","item","key","id","_hoisted_6","_normalizeStyle","backgroundImage","imageUrl","_hoisted_7","_toDisplayString","title","price","_hoisted_8","origin_price","_hoisted_9","_hoisted_10","_hoisted_11","type","onClick","$event","$options","getProduct","_hoisted_12","disabled","status","loadingItem","addCart","_hoisted_14","_hoisted_16","data","product","cart","coupon_code","form","user","name","email","tel","address","message","orderId","methods","getProducts","url","this","$http","get","then","response","console","log","$router","push","product_id","qty","post","res","$httpMessageState","getCart","updateCart","put","removeCartItem","delete","addCouponCode","coupon","code","createOrder","order","checkoutRoute","params","created","__exports__","render"],"sourceRoot":""}